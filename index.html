<!doctype html>
<html>
  <title>Neurosky - Cylon - Brian Data</title>
  <head>
    <style>
            .page-header{diplay:block;margin:0 auto 0 50px;color:#349948;width:100%;}
            .brain-data-container{margin:0 0 0 50px;min-width: 200px;display:inline-block;}
            .brain-data-heading{color:#266299;}
            .brain-data-row{ display:block;color:#123456; padding:0 0 10px 0; border:0 0 1px 0; }
            .brain-data-category{ width: 100px; display:inline-block;}
            .brain-data-value{ color:#ff0000; display:inline-block;}
    </style>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/Chart.js/0.2.0/Chart.js"></script>    
    
    <script>
    $(function() {

      var newDeltaText     = $('#new-delta');
      var newThetaText     = $('#new-theta');
      var newLoAlphaText   = $('#new-lo-alpha');
      var newHiAlphaText   = $('#new-hi-alpha');
      var newLoBetaText    = $('#new-lo-beta');
      var newHiBetaText    = $('#new-hi-beta');      
      var newLoGammaText   = $('#new-lo-gamma');
      var newMidGammaText  = $('#new-mid-gamma');

      var avgDeltaText     = $('#avg-delta');
      var avgThetaText     = $('#avg-theta');
      var avgLoAlphaText   = $('#avg-lo-alpha');
      var avgHiAlphaText   = $('#avg-hi-alpha');
      var avgLoBetaText    = $('#avg-lo-beta');
      var avgHiBetaText    = $('#avg-hi-beta');      
      var avgLoGammaText   = $('#avg-lo-gamma');
      var avgMidGammaText  = $('#avg-mid-gamma');

      var avg1000DeltaText      = $('#avg-1000-delta');  
      var avg1000ThetaText      = $('#avg-1000-theta');
      var avg1000LoAlphaText    = $('#avg-1000-lo-alpha');
      var avg1000HiAlphaText    = $('#avg-1000-hi-alpha');
      var avg1000LoBetaText     = $('#avg-1000-lo-beta');
      var avg1000HiBetaText     = $('#avg-1000-hi-beta');      
      var avg1000LoGammaText    = $('#avg-1000-lo-gamma');
      var avg1000MidGammaText   = $('#avg-1000-mid-gamma');

      var newBrainData;
      var avgBrainData;
      var avg1000BrainData;

      var socket = io();

      socket.on('brain-data', function(brainData){
          newBrainData = brainData[0];
          avgBrainData = brainData[1];
          avg1000BrainData = brainData[2];

          console.dir(brainData);
          
          newDeltaText.html(newBrainData["delta"]);   
          newThetaText.html(newBrainData["theta"]);     
          newLoAlphaText.html(newBrainData["loAlpha"]);   
          newHiAlphaText.html(newBrainData["hiAlpha"]);
          newLoBetaText.html(newBrainData["loBeta"]);
          newHiBetaText.html(newBrainData["hiBeta"]);          
          newLoGammaText.html(newBrainData["loGamma"]);
          newMidGammaText.html(newBrainData["midGamma"]);

          avgDeltaText.html(avgBrainData["delta"]);
          avgThetaText.html(avgBrainData["theta"]);
          avgLoAlphaText.html(avgBrainData["loAlpha"]);
          avgHiAlphaText.html(avgBrainData["hiAlpha"]);
          avgLoBetaText.html(avgBrainData["loBeta"]);
          avgHiBetaText.html(newBrainData["hiBeta"]);          
          avgLoGammaText.html(avgBrainData["loGamma"]);
          avgMidGammaText.html(avgBrainData["midGamma"]);

          avg1000DeltaText.html(avg1000BrainData["delta"]);
          avg1000ThetaText.html(avg1000BrainData["theta"]);
          avg1000LoAlphaText.html(avg1000BrainData["loAlpha"]);
          avg1000HiAlphaText.html(avg1000BrainData["hiAlpha"]);
          avg1000LoBetaText.html(avg1000BrainData["loBeta"]);
          avgHiBetaText.html(newBrainData["hiBeta"]);           
          avg1000LoGammaText.html(avg1000BrainData["loGamma"]);
          avg1000MidGammaText.html(avg1000BrainData["midGamma"]);          
      });
    });
    </script>
  </head>

      <body>
              <div class="page-header">
                <h1>Brain Data</h1>
              </div>
              <div class="brain-data-container">
                    <h3 class="brain-data-heading">New Reading</h3>
                        <div class="brain-data-row">
                           <div class="brain-data-category">Delta: </div>
                           <div class="brain-data-value" id="new-delta">newData["delta"]</div>
                        </div>
                        <div class="brain-data-row">
                          <div class="brain-data-category">Theta: </div>
                          <div class="brain-data-value" id="new-theta">newData["theta"]</div>
                        </div>
                        <div class="brain-data-row">   
                            <div class="brain-data-category">Low Alpha: </div> 
                            <div class="brain-data-value" id="new-lo-alpha">newData["loAlpha"]</div>
                        </div>    
                        <div class="brain-data-row">
                            <div class="brain-data-category">High Alpha: </div> 
                            <div class="brain-data-value" id="new-hi-alpha">newData["hiAlpha"]</div>
                        </div>
                        <div class="brain-data-row">
                            <div class="brain-data-category">Low Beta: </div>
                            <div class="brain-data-value" id="new-lo-beta">newData["loBeta"]</div>
                        </div>
                        <div class="brain-data-row">
                            <div class="brain-data-category">High Beta: </div>
                            <div class="brain-data-value" id="new-hi-beta">newData["hiBeta"]</div>
                        </div>                        
                        <div class="brain-data-row"> 
                            <div class="brain-data-category">Low Gamma: </div>
                            <div class="brain-data-value" id="new-lo-gamma">newData["loGamma"]</div>
                        </div>
                        <div class="brain-data-row">  
                            <div class="brain-data-category">Mid Gamma: </div>
                            <div class="brain-data-value" id="new-mid-gamma">newData["midGamma"]</div>
                        </div>
              </div>


              <div class="brain-data-container">
              <h3 class="brain-data-heading">Average of Last 10 Readings</h3>
                      <div class="brain-data-row">
                          <div class="brain-data-category">Delta: </div> 
                          <div class="brain-data-value" id="avg-delta">avgData["delta"]</div>
                      </div>
                      <div class="brain-data-row">
                          <div class="brain-data-category">Theta: </div> 
                          <div class="brain-data-value" id="avg-theta">avgData["theta"]</div>
                      </div>
                      <div class="brain-data-row">
                          <div class="brain-data-category">Low Alpha: </div>
                          <div class="brain-data-value" id="avg-lo-alpha">avgData["loAlpha"]</div>
                      </div>
                      <div class="brain-data-row">
                          <div class="brain-data-category">High Alpha: </div>
                          <div class="brain-data-value" id="avg-hi-alpha">avgData["hiAlpha"]</div>
                      </div>
                      <div class="brain-data-row"> 
                          <div class="brain-data-category">Low Beta: </div>
                          <div class="brain-data-value" id="avg-lo-beta">avgData["loBeta"]</div>
                      </div>
                      <div class="brain-data-row"> 
                          <div class="brain-data-category">High Beta: </div>
                          <div class="brain-data-value" id="avg-hi-beta">avgData["hiBeta"]</div>
                      </div>                      
                      <div class="brain-data-row">   
                          <div class="brain-data-category">Low Gamma: </div>
                          <div class="brain-data-value" id="avg-lo-gamma">avgData["loGamma"]</div>
                      </div>
                      <div class="brain-data-row">   
                          <div class="brain-data-category">Mid Gamma: </div>
                          <div class="brain-data-value"  id="avg-mid-gamma">avgData["midGamma"]</div>
                      </div>
              </div>

              <div class="brain-data-container">
              <h3 class="brain-data-heading">Average of Last 1000 Readings</h3>
                      <div class="brain-data-row">
                          <div class="brain-data-category">Delta: </div> 
                          <div class="brain-data-value" id="avg-1000-delta">avg1000Data["delta"]</div>
                      </div>
                      <div class="brain-data-row">
                          <div class="brain-data-category">Theta: </div> 
                          <div class="brain-data-value" id="avg-1000-theta">avg1000Data["theta"]</div>
                      </div>
                      <div class="brain-data-row">
                          <div class="brain-data-category">Low Alpha: </div>
                          <div class="brain-data-value" id="avg-1000-lo-alpha">avg1000Data["loAlpha"]</div>
                      </div>
                      <div class="brain-data-row">
                          <div class="brain-data-category">High Alpha: </div>
                          <div class="brain-data-value" id="avg-1000-hi-alpha">avg1000Data["hiAlpha"]</div>
                      </div>
                      <div class="brain-data-row"> 
                          <div class="brain-data-category">Low Beta: </div>
                          <div class="brain-data-value" id="avg-1000-lo-beta">avg1000Data["loBeta"]</div>
                      </div>
                      <div class="brain-data-row"> 
                          <div class="brain-data-category">High Beta: </div>
                          <div class="brain-data-value" id="avg-1000-hi-beta">avg1000Data["hiBeta"]</div>
                      </div>                      
                      <div class="brain-data-row">   
                          <div class="brain-data-category">Low Gamma: </div>
                          <div class="brain-data-value" id="avg-1000-lo-gamma">avg1000Data["loGamma"]</div>
                      </div>
                      <div class="brain-data-row">   
                          <div class="brain-data-category">Mid Gamma: </div>
                          <div class="brain-data-value"  id="avg-1000-mid-gamma">avg1000Data["midGamma"]</div>
                      </div>
              </div>     
              <div style="width:30%">
                <div>
                  <canvas id="canvas" height="450" width="600"></canvas>
                </div>
              </div>       
     </body>
     <script>
    var randomScalingFactor = function(){ return Math.round(Math.random()*1000)};
    var mockBrainData = function(){return Math.round(Math.random()*100000)};
    var lineChartData = {
      labels : ["January","February","March","April","May","June","July"],
      datasets : [
        {
          label: "My First dataset",
          fillColor : "rgba(220,220,220,0.2)",
          strokeColor : "rgba(220,220,220,1)",
          pointColor : "rgba(220,220,220,1)",
          pointStrokeColor : "#fff",
          pointHighlightFill : "#fff",
          pointHighlightStroke : "rgba(220,220,220,1)",
          data : [randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor()]
        },
        {
          label: "My Second dataset",
          fillColor : "rgba(151,187,205,0.2)",
          strokeColor : "rgba(151,187,205,1)",
          pointColor : "rgba(151,187,205,1)",
          pointStrokeColor : "#fff",
          pointHighlightFill : "#fff",
          pointHighlightStroke : "rgba(151,187,205,1)",
          data : [randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor(),randomScalingFactor()]
        }
      ]

    }

  window.onload = function(){
    var ctx = document.getElementById("canvas").getContext("2d");
    window.myLine = new Chart(ctx).Line(lineChartData, {
      responsive: true
    });
  }


  </script>
<html>